[{"name": "多开后台保活","description": "by诗里沧海怨怼 | 应用被杀后台后,自动重启 | 要求thanox版本5.0.8+ | 不要改priority","priority": 1,"condition": "pkgKilled||shortcutLaunched&&shortcutValue=='keepAppsRun'","actions": ["if(pkgKilled){keepAman=thanos.activityManager;cntKeep=0;foreach(proc:globalVarOf$keepAlive){if(++cntKeep==50){Thread.sleep(150);cntKeep=0;}if(proc!=null&&proc.startsWith(pkgName)){strs=proc.split(' ');if(strs.length==1){if(!keepAman.isPackageRunning(pkgName)){_profile.publishStringFactInternal(1,'keepAppsRun',4500,new Object[]{Pkg.newPkg(pkgName,0)});}}else{idStrs=strs[1].split(',');pkgs=new Object[idStrs.length];cntPkg=0;for(idStr:idStrs){if(++cntKeep==50){Thread.sleep(150);cntKeep=0;}mypkg=Pkg.newPkg(pkgName,Integer.valueOf(idStr));if(!keepAman.isPackageRunning(mypkg)){pkgs[cntPkg++]=mypkg;}}if(cntPkg>0){_profile.publishStringFactInternal(1,'keepAppsRun',4500,pkgs);}}return;}}}else{for(mypkg:args){if(mypkg==null){return;}activity.launchProcessForPackage(mypkg.pkgName,mypkg.userId);}}"]}]